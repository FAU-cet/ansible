---
-   name: setup Head
    hosts: head

    roles:
    -   role: update

    -   role: folder
        vars:
            path: "/srv/exports/home"

    -   role: enable-firewall-ports
        vars:
            service: "nfs"

    -   role: share-nfs
        vars:
            path: "/srv/exports/home"
            client: "localhost"
            mode: "rw,no_root_squash"

    -   role: enable-autostart
        vars:
            services:
            -   nfs-server

    -   role: share-nfs
        vars:
            path: "/srv/exports/home"
            clients:
            -   "cs3-emmy-8"
            -   "cs3-emmy-9"
            -   "cs3-emmy-12"
            -   "cs3-emmy-13"
            -   "cs3-emmy-14"
            -   "cs3-emmy-15"

    -   role: mount-nfs
        vars:
            serverPath: "/srv/exports/home"
            clientPath: "/home/users"
            server: "localhost"

    -   role: folder
        vars:
            path: "/home/users"
            mode: "755"

    -   role: folder
        vars:
            path: "/srv/exports/software"

    -   role: share-nfs
        vars:
            path: "/srv/exports/software"
            client: "localhost"
            mode: "rw,no_root_squash"

    -   role: share-nfs
        vars:
            path: "/srv/exports/software"
            clients:
            -   "cs3-emmy-8"
            -   "cs3-emmy-9"
            -   "cs3-emmy-12"
            -   "cs3-emmy-13"
            -   "cs3-emmy-14"
            -   "cs3-emmy-15"

    -   role: mount-nfs
        vars:
            serverPath: "/srv/exports/software"
            clientPath: "/software"
            server: "localhost"

    -   role: selinux
        vars:
            plice: "use_nfs_home_dirs"

    -   role: create-users-with-tmp-passwd
    -   role: dye-prompt
    -   role: enable-repos
